<div class="p-4 sm:ml-64">
  <div class="p-4 mt-14">
    <h1
      class="mb-3 font-normal text-gray-500 dark:text-gray-400 bg-gray-200 rounded-lg text-center"
    >
      Lista de Asesores Comerciales
    </h1>
    <button
      class="bg-blue-500 hover:bg-blue-700 text-white font-bold px-4 rounded-full"
      (click)="openDialog()"
    >
      Crear Asesor Comercial
    </button>
    <div class="overflow-x-auto">
      <div class="mat-elevation-z8">
        <table
          mat-table
          [dataSource]="dataSource"
          class="mat-elevation-z8"
          matSort
        >
          <!-- ID Column -->
          <ng-container matColumnDef="ID">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let user">{{ user._id }}</td>
          </ng-container>

          <!-- Nombre Column -->
          <ng-container matColumnDef="Nombre">
            <th mat-header-cell *matHeaderCellDef>Nombre</th>
            <td mat-cell *matCellDef="let user">{{ user.name.firstName }}</td>
          </ng-container>

          <!-- Apellido Column -->
          <ng-container matColumnDef="Apellido">
            <th mat-header-cell *matHeaderCellDef>Apellido</th>
            <td mat-cell *matCellDef="let user">{{ user.name.lastName }}</td>
          </ng-container>

          <!-- Email Column -->
          <ng-container matColumnDef="Email">
            <th mat-header-cell *matHeaderCellDef>Email</th>
            <td mat-cell *matCellDef="let user">{{ user.email }}</td>
          </ng-container>

          <!-- Documento Column -->
          <ng-container matColumnDef="documento">
            <th mat-header-cell *matHeaderCellDef>Documento</th>
            <td mat-cell *matCellDef="let user">{{ user.document }}</td>
          </ng-container>

          <!-- Celular Column -->
          <ng-container matColumnDef="celular">
            <th mat-header-cell *matHeaderCellDef>Celular</th>
            <td mat-cell *matCellDef="let user">{{ user.phone }}</td>
          </ng-container>

          <!-- NumeroCuenta Column -->
          <ng-container matColumnDef="NumeroCuenta">
            <th mat-header-cell *matHeaderCellDef>NumeroCuenta</th>
            <td mat-cell *matCellDef="let user">{{ user.numberAccount }}</td>
          </ng-container>

          <!-- Categoria Column -->
          <ng-container matColumnDef="categoria">
            <th mat-header-cell *matHeaderCellDef>Categoria</th>
            <td mat-cell *matCellDef="let user">
              <span
                class="inline-flex items-center justify-center px-2 ml-3 text-sm font-medium rounded-full {{
                  user.category === 'Junior'
                    ? 'text-blue-600 bg-blue-200'
                    : user.category === 'Senior'
                    ? 'text-yellow-500 bg-yellow-200'
                    : 'text-red-700 bg-red-300'
                }}"
              >
                {{ user.category }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="experience">
            <th mat-header-cell *matHeaderCellDef>Experience</th>
            <td mat-cell *matCellDef="let user">
              <span
                class="inline-flex items-center justify-center px-2 ml-3 text-sm font-medium rounded-full {{
                  user.experience === 'Ingeniero'
                    ? 'text-green-600 bg-green-200'
                    : user.experience === 'Programador'
                    ? 'text-purple-500 bg-purple-200'
                    : 'text-cyan-700 bg-cyan-300'
                }}"
              >
                {{ user.experience }}
              </span>
            </td>
          </ng-container>

          <!-- VentasMes Column -->
          <ng-container matColumnDef="ventasMes">
            <th mat-header-cell *matHeaderCellDef>VentasMes</th>
            <td mat-cell *matCellDef="let user">{{ user.monthlySales }}</td>
          </ng-container>

          <!-- CreatedAt Column -->
          <ng-container matColumnDef="createdAt">
            <th mat-header-cell *matHeaderCellDef>CreatedAt</th>
            <td mat-cell *matCellDef="let user">{{ user.createdAt }}</td>
          </ng-container>

          <ng-container matColumnDef="acciones">
            <th mat-header-cell *matHeaderCellDef>Acciones</th>
            <td mat-cell *matCellDef="let user">
              <div class="flex space-x-3">
                <button (click)="updateAdvisor(user)">
                  <fa-icon class="text-green-700" [icon]="faPenAlt"></fa-icon>
                </button>
                <button (click)="deleteAdvisor(user._id)">
                  <fa-icon class="text-red-700" [icon]="faTrashAlt"></fa-icon>
                </button>
                <button
                  class="bg-blue-500 hover:bg-blue-700 text-white font-bold px-4"
                  (click)="createPayroll(user)"
                >
                  Generar Nomina
                </button>
              </div>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>

        <mat-paginator
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
        ></mat-paginator>
      </div>
    </div>
  </div>
</div>
